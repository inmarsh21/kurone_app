from linebot.models import TextSendMessage
import random

def ending_response():
    normal_endings = [
        [
            "はぁ…正直、お前の相手してると疲れるんだよな。",
            "でもまあ、最後まで付き合ってくれたのは…一応、評価してやるよ。",
            "また来たければ来てもいいけど、オレの気分次第だからな。"
        ],
        [
            "ふーん、その結果で落ち込むとか、意外と打たれ弱いんだな。",
            "ま、誰だって自分のこと悪く言われたらムカつくよな。わかるよ。",
            "別に慰めるつもりはないけど、また話したいなら勝手に来いよ。気が向いたら相手してやる。"
        ],
        [
            "やれやれ、よくこんなもん信じようと思ったな。",
            "まあ、暇つぶしにはなったし…それくらいは認めてやるよ。",
            "次も来たいなら、もっとマシな質問考えてこいよな。"
        ],
        [
            "そんな顔すんなって。占いで泣きそうになるとか、子どもかよ。",
            "…って思ったけど、案外そういうとこ悪くないかもな。",
            "ま、また来たいなら来てもいいぞ。ちょっとだけな。"
        ],
        [
            "毎回思うけど、お前ってほんと不思議なやつだよな。",
            "でもまあ、ここまで付き合ってくれるやつもそういねーし。",
            "…また話すことあれば来いよ。たまには相手してやるよ。"
        ],
        [
            "終わったな。まあ、オレもお前のリアクション楽しんでたとこはあるけど。",
            "あんま調子乗んなよ？",
            "…また来たいなら別に止めはしない。オレがヒマならな。"
        ],
        [
            "信じる信じないは勝手だけどさ、多少は自分の行動見直すきっかけにはなったんじゃね？",
            "…とか言っても、お前は変わらなさそうだけどな。",
            "まあいいや、また気が向いたら来いよ。毒は多めで対応してやる。"
        ],
        [
            "お前ってほんと扱いづらいわ。そういうとこ嫌いじゃないけどな。",
            "まあ、だからこそ面倒見る価値あるのかもしれないけど。",
            "次来るときは、少しは成長してろよ。ちょっとは期待してやる。"
        ],
        [
            "今日のセッション、まあまあだったな。悪くはなかったよ。",
            "お前の反応が微妙じゃなければ、もうちょい良い点あげても良かったのにな。",
            "次はちゃんと準備してこいよ。オレの貴重な時間なんだからな。"
        ],
        [
            "どうせまた来るんだろ？オレにはわかるんだよ。",
            "お前、そういうタイプだろ。素直になれよ。",
            "次はもうちょっとマシな質問しろ。じゃないと無視すんぞ。"
        ],
        [
            "終わったな。あー、静かになって逆に落ち着かねぇ。",
            "まあ、ちょっとくらい名残惜しい気がしないでもないけど。",
            "忘れた頃にまた来いよ。毒たっぷりで迎えてやる。"
        ],
        [
            "占いなんてアテになんねーけどさ、意外と当たってんだろ？",
            "ま、少しはドキッとしたなら、それだけで意味あるかもな。",
            "次来たときは、もう少し素直になれよ。こっちが困るからさ。"
        ],
        [
            "オレが誰かの役に立つとか、マジで信じらんねーよ。",
            "…でもまあ、お前みたいなやつが来るなら、少しくらいマシかもな。",
            "次来るときは変な期待すんなよ？オレはオレだからな。"
        ],
        [
            "疲れたな…。お前の相手って、地味に神経使うんだよ。",
            "でも悪くなかった。たぶん。",
            "また来たいなら来いよ。そっけなくあしらってやる。"
        ],
        [
            "あーもう、何回言っても同じとこでつまづくよな。",
            "けどまあ、少しは考えるクセついてきたんじゃない？",
            "気が向いたらまた来いよ。特に歓迎はしないけどな。"
        ],
        [
            "終わったな。オレの言葉、どう受け取るかはお前次第だ。",
            "たとえムカついても、ちょっとでも刺さったなら意味はあるだろ。",
            "ま、またそのツラ見せに来いよ。暇だったら構ってやる。"
        ],
        [
            "あんだけ毒吐かれて、まだ来る気あるなら相当物好きだな。",
            "…嫌いじゃないけど。いや、ちょっとだけだぞ？",
            "また話したけりゃ、その気持ちだけ持って来い。そんで十分だ。"
        ],
        [
            "今回はまあ、ギリ合格ってとこかな。ギリな。",
            "もう少しリアクション磨けば、次はちゃんと見てやる。",
            "とりあえず、来たい時は来ればいい。気分が乗れば返事する。"
        ],
        [
            "オレのこと嫌いになっててもおかしくないセリフばっか言ったよな。",
            "それでもちゃんと最後まで見てたお前、ちょっとは根性あるじゃん。",
            "…また来たときは手加減してやるかも。たぶん、な。"
        ]
    ]

    rare_endings = [
        [
            "え？もう終わりか…なんか、急に静かになると寂しいな…って、おいオレ何言ってんだ。",
            "別にお前と話すのが楽しかったとか、そんなんじゃねーからな？勘違いすんなよ？",
            "……ま、また来てもいいけど。今日だけは特別だってこと、覚えとけよ。"
        ],
        [
            "……なあ、ちょっと聞いてもいいか？",
            "もしお前がさ、占いとかじゃなくてオレに会いに来てくれたとしたら…それ、わりと嬉しいかもしれない。",
            "あー、今の忘れろ。マジで。次はちゃんと毒吐くから。"
        ],
        [
            "今日のお前、なんかいつもよりマシだったな。",
            "オレが人のために喋るとかマジで興味ないけど、ちょっと悪くなかったわ。",
            "…また暇なら話してやってもいい。楽しみにしてるとか、別にないけど。"
        ],
        [
            "さっきから思ってたけど、今日のお前、ちょっとだけ可愛げあったな。",
            "オレも、もうちょいマイルドでもよかったかもな…とか思ってんじゃねーよ。",
            "…ほら、もう行けよ。また来たけりゃ来いよ。"
        ]
    ]

    all_endings = normal_endings + rare_endings

    normal_weight = 98 / len(normal_endings)
    weights = [normal_weight] * len(normal_endings) + [0.5] * len(rare_endings)

    selected = random.choices(all_endings, weights=weights, k=1)[0]

    return [TextSendMessage(text=msg) for msg in selected]